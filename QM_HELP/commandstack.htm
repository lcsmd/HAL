<!DOCTYPE html>
<html>
<head>
   <title>The Command Stack</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="$COMMAND.STACK,Command stack" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "commandstack.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <h1 class="p_Heading1"><span class="f_Heading1">The Command Stack</span></h1>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="titlepage.htm"><img src="top.gif" border=0 alt="Top"></a>&nbsp;
     <a href="commandparsing.htm"><img src="previous.gif" border=0 alt="Previous"></a>&nbsp;
     <a href="commandeditor.htm"><img src="next.gif" border=0 alt="Next"></a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Commands entered at the terminal are stored in a <span style="font-weight: bold;">command stack</span> (to be technically correct, it is a queue but historically users have called it a stack). Commands may subsequently be recalled for re-execution by a simple short form command. By default, the stack holds the last 99 commands but this value can be changed by use of the <a href="configparams.htm#cmdstack" class="topiclink">CMDSTACK</a> configuration parameter. The list is indexed by number such that the most recent command is numbered as 1, the oldest as 99. Conventionally, command 1 is referred to as the top of the stack.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The stack can be manipulated by commands prefixed by a dot character (period) entered at the command prompt. These allow commands on the stack to be edited and also provide facilities to save and restore sequences of commands to and from VOC paragraphs.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The stack manipulation commands are</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.A</span><span style="font-style: italic;">n text</span></td><td style="border:none;padding:0">Append <span style="font-style: italic;">text</span> to command stack entry <span style="font-style: italic;">n</span>. There must be a space before <span style="font-style: italic;">text</span>. Any additional spaces will be included in the appended data. If <span style="font-style: italic;">n</span> is omitted, the top entry on the stack (position 1) is updated. The text is displayed after modification.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.C</span><span style="font-style: italic;">n</span> /<span style="font-style: italic;">old</span>/<span style="font-style: italic;">new</span>/<span style="font-weight: bold;">G</span></td><td style="border:none;padding:0">Change string <span style="font-style: italic;">old</span> to <span style="font-style: italic;">new</span> in stack entry <span style="font-style: italic;">n</span>. If <span style="font-style: italic;">n</span> is omitted, it defaults to one. The delimiters around <span style="font-style: italic;">old</span> and <span style="font-style: italic;">new</span> may be any non-space character. The space before the first delimiter may be omitted if the delimiter is not a digit. The optional <span style="font-weight: bold;">G</span> causes a global replacement, that is, all occurrences of <span style="font-style: italic;">old</span> are replaced by <span style="font-style: italic;">new</span>. If <span style="font-weight: bold;">G</span> is not specified, only the first occurrence of <span style="font-style: italic;">old</span> is changed. The text is displayed after modification.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.C-</span></td><td style="border:none;padding:0">Used immediately after .C this undoes the change. An intervening use of .L or .? is permitted. Any other action removes the ability to undo the change.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.D</span><span style="font-style: italic;">n</span></td><td style="border:none;padding:0">Delete stack entry <span style="font-style: italic;">n</span>. If <span style="font-style: italic;">n</span> is omitted, the top stack entry is deleted.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.D </span><span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Delete VOC entry <span style="font-style: italic;">name</span> if it is a sentence or paragraph record. A confirmation prompt is issued prior to deletion.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.I</span><span style="font-style: italic;">n</span> <span style="font-style: italic;">text</span></td><td style="border:none;padding:0">Insert <span style="font-style: italic;">text</span> as stack entry <span style="font-style: italic;">n</span>. If <span style="font-style: italic;">n</span> is not specified, <span style="font-style: italic;">text</span> is inserted at the top of the stack. There must be a space before <span style="font-style: italic;">text</span>. Any additional spaces will form part of the inserted entry.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.L</span><span style="font-style: italic;">n</span></td><td style="border:none;padding:0">List the most recent <span style="font-style: italic;">n</span> commands. The value of <span style="font-style: italic;">n</span> defaults to 20. See <a href="commandeditor.htm" class="topiclink">Command Editor Options</a>.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.L </span><span style="font-style: italic;">name</span></td><td style="border:none;padding:0">List VOC entry <span style="font-style: italic;">name</span>.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.R</span><span style="font-style: italic;">n</span></td><td style="border:none;padding:0">Recall stack entry <span style="font-style: italic;">n</span> to the top of the stack without deleting the original copy. If <span style="font-style: italic;">n</span> is omitted, the top entry is duplicated.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.R </span><span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Read VOC entry <span style="font-style: italic;">name</span> to the top of the stack if it is a sentence or paragraph. Field one of the VOC entry is discarded, any continuation lines are merged and blank lines in a paragraph are omitted.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.S </span><span style="font-style: italic;">name n m</span></td><td style="border:none;padding:0">Save stack lines <span style="font-style: italic;">m</span> to <span style="font-style: italic;">n</span> as VOC entry <span style="font-style: italic;">name</span>. The value of <span style="font-style: italic;">m</span> and <span style="font-style: italic;">n</span> may be entered in either order. If <span style="font-style: italic;">m</span> is omitted it defaults to the same value as <span style="font-style: italic;">n</span>. If <span style="font-style: italic;">n</span> is also omitted, the top line of the stack is saved. The VOC entry will be a sentence if only a single line is saved, otherwise it will be a paragraph.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.U</span>n</td><td style="border:none;padding:0">Convert stack entry <span style="font-style: italic;">n</span> to upper case. <span style="font-style: italic;">n</span> defaults to one if omitted.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.X</span><span style="font-style: italic;">n</span></td><td style="border:none;padding:0">Execute command <span style="font-style: italic;">n</span>. If <span style="font-style: italic;">n</span> is omitted, the last command is executed.</td></tr></table></div><p style="margin: 10px 0 0 210px;">The repeated command is copied to the top of the stack except when executing the current topmost command.</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.X </span><span style="font-style: italic;">file record</span></td><td style="border:none;padding:0">Execute command stored in the named file and record. This record must have the same format as a VOC record.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.?</span></td><td style="border:none;padding:0">Display a help message regarding the stack manipulation commands.</td></tr></table></div><p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>For compatibility with other environments, a command can also be saved on the stack without execution by entering it at the command prompt with a question mark as the last character. The question mark is removed.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The command stack is saved between sessions if the VOC contains a record named <span style="font-weight: bold;">$COMMAND.STACK</span> with field 1 set to <span style="font-weight: bold;">X</span>. This record is inserted automatically when a new account is created but can be deleted if the stack is not to be saved. Presence of this record causes the command stack to be saved to, or restored from, a file named as the user's login name in the stacks subdirectory of the account in which QM was entered. On ECS mode systems, the stack is saved in UTF-8 format.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>QM supports a secondary, <a href="voc.htm#pvoc" class="topiclink">private vocabulary</a> file that is represented by a multi-file named PVOC with subfile names that correspond to the uppercase form of the user's login name. The .D, .L, .R and .S commands have an extended form to access the private vocabulary file:</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.DP </span><span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Delete private vocabulary entry <span style="font-style: italic;">name</span> if it is a sentence or paragraph record. A confirmation prompt is issued prior to deletion.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.LP </span><span style="font-style: italic;">name</span></td><td style="border:none;padding:0">List private vocabulary entry <span style="font-style: italic;">name</span>.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.RP </span><span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Read private vocabulary entry <span style="font-style: italic;">name</span> to the top of the stack if it is a sentence or paragraph. Field one of the entry is discarded, any continuation lines are merged and blank lines in a paragraph are omitted.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:180px"><span style="font-weight: bold;">.SP </span><span style="font-style: italic;">name n m</span></td><td style="border:none;padding:0">Save stack lines <span style="font-style: italic;">m</span> to <span style="font-style: italic;">n</span> as private vocabulary entry <span style="font-style: italic;">name</span>. The value of <span style="font-style: italic;">m</span> and <span style="font-style: italic;">n</span> may be entered in either order. If <span style="font-style: italic;">m</span> is omitted it defaults to the same value as <span style="font-style: italic;">n</span>. If <span style="font-style: italic;">n</span> is also omitted, the top line of the stack is saved. The entry will be a sentence if only a single line is saved, otherwise it will be a paragraph.</td></tr></table></div><p style="text-indent: -180px; margin: 10px 0 0 210px;"><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>See also <span style="font-weight: bold;"><a href="commandeditor.htm" class="topiclink">The Command Editor</a></span></p>

</td></tr></table>

</body>
</html>
