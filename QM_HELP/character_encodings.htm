<!DOCTYPE html>
<html>
<head>
   <title>Character Encodings</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="Character encodings" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "character_encodings.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <h1 class="p_Heading1"><span class="f_Heading1">Character Encodings</span></h1>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="titlepage.htm"><img src="top.gif" border=0 alt="Top"></a>&nbsp;
     <a href="ecs.htm"><img src="previous.gif" border=0 alt="Previous"></a>&nbsp;
     <a href="sorting.htm"><img src="next.gif" border=0 alt="Next"></a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Many of the external interfaces to QM support encoding to allow characters outside the 8 bit character set to be transmitted or stored as a sequence of 8 bit characters. QM has built in support for encodings such as UTF-8 but also allows users to add their own as described with the <a href="conv_x.htm" class="topiclink">X (encoding) conversion code</a>.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The QMBasic file operations that read or write directory files include an ENCODING clause to specify an encoding that will override any set by the <a href="voc_f.htm" class="topiclink">VOC F-type</a> entry for the file or when the file was opened.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">An encoding name consists of two parts; a <span style="font-weight: bold;">name</span> related to the encoding style, and an optional series of <span style="font-weight: bold;">modes</span>, each represented by a single case insensitive character, that determine how the encoding will handle certain situations. The modes are separated from the name by a period (e.g. &quot;UTF8.B&quot;). Some mode settings affect only input conversion or output conversion. In such situations, the mode will be ignored by the conversion that does not use it.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Use of the &quot;A&quot; mode setting described below for UTF-8, UTF-16 and UCS-2 encoding allows an application to read data encoded using any of these methods by recognition of a leading byte order mark. This applies only to input conversion. If there is no leading byte order mark or when performing output conversion, the &quot;A&quot; mode is ignored, applying whatever encoding name is specified.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_BoldSubheading"><span class="f_BoldSubheading">Null Encoding</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Specifying the encoding name as &quot;NULL&quot; disables encoding. This is the default behaviour of QM in the absence of an encoding name and hence should only required when overriding an encoding name set earlier. For example, an application might use the NULL encoding name in an <span style="font-weight: bold;"><a href="qmb_open.htm" class="topiclink">OPEN</a></span> where the <a href="voc_f.htm" class="topiclink">VOC F-type</a> record specifies an unwanted encoding. Note that a statement such as</p>
<p class="p_CodeSingleLine"><span class="f_CodeSingleLine">READ REC ENCODING &quot;&quot; FROM FVAR</span></p>
<p class="p_Normal">does not disable an encoding set via the VOC entry or in the <span style="font-weight: bold;"><a href="qmb_open.htm" class="topiclink">OPEN</a></span> statement. A null string as an encoding name in this context is equivalent to not having an encoding clause at all.</p>
<p class="p_Normal" style="text-indent: -59px; margin: 5px 0 0 89px;">&nbsp;</p>
<p class="p_Normal">The NULL encoding supports just one mode qualifier:</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">M</td><td style="border:none;padding:0">Exchange the five accented characters displaced from the positions occupied by the mark characters (U+00FB to U+00FF) with their alternative location (U+F8FB to U+F8FF).</td></tr></table></div><p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_BoldSubheading"><span class="f_BoldSubheading">JS Encoding</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The JS encoding is for JavaScript or JSON. Encoding data in this way replaces certain characters with escape sequences:</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\&quot;</td><td style="border:none;padding:0">Double quote</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\\</td><td style="border:none;padding:0">Backslash</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\b</td><td style="border:none;padding:0">Backspace</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\f</td><td style="border:none;padding:0">Formfeed</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\n</td><td style="border:none;padding:0">Newline</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\r</td><td style="border:none;padding:0">Carriage return</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\t</td><td style="border:none;padding:0">Tab</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 5px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:89px">\u<span style="font-style: italic;">nnnn</span></td><td style="border:none;padding:0">Character with hexadecimal value <span style="font-style: italic;">nnnn</span></td></tr></table></div><p class="p_Normal" style="text-indent: -59px; margin: 5px 0 0 89px;">&nbsp;</p>
<p class="p_Normal">The JS encoding supports just one mode qualifier:</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">M</td><td style="border:none;padding:0">Exchange the five accented characters displaced from the positions occupied by the mark characters (U+00FB to U+00FF) with their alternative location (U+F8FB to U+F8FF).</td></tr></table></div><p class="p_Normal" style="text-indent: -45px; margin: 10px 0 0 75px;">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_BoldSubheading"><span class="f_BoldSubheading">UTF-8 Encoding</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">UTF-8 is one of the most widely used encodings. Each character is transformed into an encoded form that is made up from one, two or three bytes.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The QM encoding name is UTF-8 (the hyphen may be omittde). The optional modes are:</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">A</td><td style="border:none;padding:0">Applies only to input conversion. Automatically selects UTF-8 or UCS-2 encoding based on a leading byte order mark character. Because UCS-2 in a 16-bit character environment is effectively a superset of UTF-16, UTF-16 encoded data will also be recognised by this mode setting.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">B</td><td style="border:none;padding:0">Applies only to output conversion. Adds a leading byte order mark code (internal character U+FEFF, encoded to three bytes as hexadecimal EF BB BF) if not already present. Although byte ordering is irrelevant in UTF-8, the byte order mark is frequently inserted by software, perhaps simply as a way to recognise that the data is encoded in UTF-8 format.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">C</td><td style="border:none;padding:0">Applies only to input conversion. Performs a &quot;carry&quot; from successive uses of the conversion such that an incomplete UTF-8 sequence at the end of one conversion can be continued in the next conversion. This is of use where data may arrive in incomplete fragments such as when reading from a socket.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">D</td><td style="border:none;padding:0">Applies only to input conversion. Discards a leading byte order mark, if present.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">M</td><td style="border:none;padding:0">Exchange the five accented characters displaced from the positions occupied by the mark characters (U+00FB to U+00FF) with their alternative location (U+F8FB to U+F8FF).</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">P</td><td style="border:none;padding:0">Preserves characters 251 to 255 in the input data (input conversion only). Although strictly UTF-8 data cannot contain these characters, some other multivalue products allow their use as unencoded mark characters. This mode, intended only for use when importing data into QM, copies these characters unchanged so that the dynamic array structure in maintained.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">W</td><td style="border:none;padding:0">Applies only to input conversion. Replaces embedded byte order marks not at the start of the data with the word joiner character (U+2060).</td></tr></table></div><p class="p_Normal">&nbsp;</p>
<p class="p_Normal">On an input conversion, characters that lie outside the supported character set (16 bit on ECS systems, 8-bit on non-ECS systems) are replaced with a substitute character. Unicode defines this as character U+FFFD. On non-ECS systems, invalid characters are replaced by a question mark.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_BoldSubheading"><span class="f_BoldSubheading">UTF-16 Encoding</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">UTF-16 encoding records Unicode data as byte pairs. The UTF-16 standard specifies that the default behaviour should be high byte first but QM allows either ordering. The byte order mark (codepoint U+FEFF) can be included as the first byte pair to allow programs reading the data to automatically detect the byte order.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">UTF-16 cannot encode Unicode characters U+D800 to U+DFFF as these are reserved for use in &quot;surrogate pairs&quot; for characters outside the BMP. Data including these characters will result in an error status from the conversion but should never occur due to their reserved role.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The QM encoding name is UTF-16 (the hyphen may be omitted). The optional modes are:</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">A</td><td style="border:none;padding:0">Applies only to input conversion. Automatically selects UTF-8 or USC-2 encoding based on a leading byte order mark character. Because UCS-2 in a 16-bit character environment is effectively a superset of UTF-16, UTF-16 encoded data will also be recognised by this mode setting.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">B</td><td style="border:none;padding:0">Applies only to output conversion. Adds a leading byte order mark code if not already present.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">C</td><td style="border:none;padding:0">Applies only to input conversion. Performs a &quot;carry&quot; from successive uses of the conversion such that an incomplete UTF-16 sequence at the end of one conversion can be continued in the next conversion. This is of use where data may arrive in incomplete fragments such as when reading from a socket.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">L</td><td style="border:none;padding:0">Specifies that the encoded data is low byte first (little endian). On an input conversion, a leading byte order mark may override this setting.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">M</td><td style="border:none;padding:0">Exchange the five accented characters displaced from the positions occupied by the mark characters (U+00FB to U+00FF) with their alternative location (U+F8FB to U+F8FF).</td></tr></table></div><p class="p_Normal">&nbsp;</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_BoldSubheading"><span class="f_BoldSubheading">UCS-2 Encoding</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">UCS-2 encoding records Unicode data as byte pairs in a similar manner to UTF-16 but does not reserve characters U+D800 to U+DFFF for special use. The UCS-2 standard specifies that the default behaviour should be high byte first but QM allows either ordering. The byte order mark (codepoint U+FEFF) can be included as the first byte pair to allow programs reading the data to automatically detect the byte order.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The QM encoding name is UCS-2 (the hyphen may be omitted). The optional modes are:</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">A</td><td style="border:none;padding:0">Applies only to input conversion. Automatically selects UTF-8 or USC-2 encoding based on a leading byte order mark character. Because UCS-2 in a 16-bit character environment is effectively a superset of UTF-16, UTF-16 encoded data will also be recognised by this mode setting.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">B</td><td style="border:none;padding:0">Applies only to output conversion. Adds a leading byte order mark code if not already present.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">C</td><td style="border:none;padding:0">Applies only to input conversion. Performs a &quot;carry&quot; from successive uses of the conversion such that an incomplete UTF-16 sequence at the end of one conversion can be continued in the next conversion. This is of use where data may arrive in incomplete fragments such as when reading from a socket.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">L</td><td style="border:none;padding:0">Specifies that the encoded data is low byte first (little endian). On an input conversion, a leading byte order mark may override this setting.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 10px 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:45px">M</td><td style="border:none;padding:0">Exchange the five accented characters displaced from the positions occupied by the mark characters (U+00FB to U+00FF) with their alternative location (U+F8FB to U+F8FF).</td></tr></table></div>
</td></tr></table>

</body>
</html>
