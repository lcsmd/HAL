<!DOCTYPE html>
<html>
<head>
   <title>PHANTOM</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="PHANTOM" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "phantom.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <h1 class="p_Heading1"><span class="f_Heading1">PHANTOM</span></h1>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="titlepage.htm"><img src="top.gif" border=0 alt="Top"></a>&nbsp;
     <a href="pdump.htm"><img src="previous.gif" border=0 alt="Previous"></a>&nbsp;
     <a href="pool_status.htm"><img src="next.gif" border=0 alt="Next"></a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The <span style="font-weight: bold;">PHANTOM</span> command starts execution of a verb, sentence or paragraph as a background process.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">Format</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-weight: bold;">PHANTOM</span> {<span style="font-style: italic;">options</span>} <span style="font-style: italic;">command</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">where</p>
<p class="p_Normal">&nbsp;</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:118px"><span style="font-style: italic;">options</span></td><td style="border:none;padding:0">are selected from the following items described in detail below:</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">ACCOUNT <span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Requests that the phantom process runs in a specific account.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">DATA</td><td style="border:none;padding:0">Passes the data queue of the parent process to the phantom.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">GROUP</td><td style="border:none;padding:0">Specifies that the phantom process is to be grouped with its parent.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">LOGGING <span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Specifies a non-default name for the log file.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">NO.LOG</td><td style="border:none;padding:0">No log file is to be produced.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">NO.MSG</td><td style="border:none;padding:0">No start or termination message to be displayed in parent process.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">POOL <span style="font-style: italic;">name</span></td><td style="border:none;padding:0">Makes the phantom process a member of the named <a href="connection_pooling.htm" class="topiclink">connection pool</a>.</td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 180px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:182px">USER <span style="font-style: italic;">n</span></td><td style="border:none;padding:0">Requests that the phantom runs as a specific user number.</td></tr></table></div><p class="p_Normal" style="text-indent: -118px; margin: 0 0 0 148px;">&nbsp;</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 30px;"><table style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:118px"><span style="font-style: italic;">command</span></td><td style="border:none;padding:0">is the command to be executed by the phantom process.</td></tr></table></div><p class="p_Normal" style="text-indent: -118px; margin: 0 0 0 148px;">&nbsp;</p>
<p class="p_Normal" style="text-indent: -118px; margin: 0 0 0 148px;">&nbsp;</p>
<p>A new background process is started to execute the <span style="font-style: italic;">command</span> which must be a valid verb, sentence or paragraph. The process from which the <span style="font-weight: bold;">PHANTOM</span> command was performed continues without waiting for <span style="font-style: italic;">command</span> to be completed. A message is displayed indicating the user number associated with the phantom. The user number is also returned in <a href="at_variables.htm#system.return.code" class="topiclink">@SYSTEM.RETURN.CODE</a>. If the phantom process cannot be started, <a href="at_variables.htm#system.return.code" class="topiclink">@SYSTEM.RETURN.CODE</a> holds the negative error code.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p class="p_Normal">When using the <span style="font-weight: bold;">POOL</span> option, the system will first look for an idle process in that pool that can be awakened. If no such process is found, a new phantom is started. The pool name may be followed by the keyword <span style="font-weight: bold;">NEW.PROCESS</span> to force creation of a new process even if an idle process exists. This allows an application to start a number of phantom processes that perform initialisation and then go into the idle pool waiting for work to do.</p>
<p class="p_Normal">&nbsp;</p>
<p>When the background process terminates a message is queued for display immediately before the next command prompt. This message is</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">Phantom </span><span style="font-family: 'Courier New',Courier,monospace; font-style: italic;">n</span><span style="font-family: 'Courier New',Courier,monospace;"> : Normal termination.</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>where <span style="font-style: italic;">n</span> is the user number if the process completed successfully or</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">Phantom </span><span style="font-family: 'Courier New',Courier,monospace; font-style: italic;">n</span><span style="font-family: 'Courier New',Courier,monospace;"> : Abnormal termination.</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>if the process aborted.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The default behaviour of the phantom process is to create a record in the $COMO file named PH<span style="font-style: italic;">n_date_time</span> exactly as though it had commenced with the command</p>
<p style="margin: 6px 0 6px 30px;"><span style="font-weight: bold;">COMO ON PH</span><span style="font-style: italic;">n_date_time</span></p>
<p>This record will contain all output from the phantom process that would be directed to the terminal in an interactive process. The logging file may be switched off or redirected as desired from within the phantom process.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Use of the <span style="font-weight: bold;">NO.LOG</span> keyword causes the phantom process to run with no log file. Alternatively, the <span style="font-weight: bold;">LOGGING</span> keyword may be used to specify the <span style="font-style: italic;">name</span> of the log file record to be created. If <span style="font-style: italic;">name</span> is a quoted string containing a space, the portion before then space must correspond to a VOC file definition record for a directory file and the portion after the space will be used as the record name within that file.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Except when the <span style="font-weight: bold;">NO.LOG</span> or <span style="font-weight: bold;">LOGGING</span> option is used, the <span style="font-weight: bold;">PHANTOM</span> command checks for the presence of a catalogued subroutine named PHLOGNAME. If found, it is called with two arguments; the first through which it return an alternative log location, the second passed in as the command to be executed by the phantom process. The return value must be a file name and record name, separated by a single space where the file name must correspond to an already existing directory file on the QM server. This feature allows automatic selection of alternative log file locations and provides the opportunity for compatibility with log file naming conventions used by other systems.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">For example, the phantom log record strategy used by UniVerse can be achieved with a PHLOGNAME subroutine as below.</p>
<p class="p_CodeTopLine"><span class="f_CodeTopLine">subroutine phlogname(result, command)</span></p>
<p class="p_CodeBody"><span class="f_CodeBody">$catalogue</span></p>
<p class="p_CodeBody"><span class="f_CodeBody"> &nbsp; result = '&amp;PH&amp; ' : upcase(field(command, ' ', 1)):'_':time():'_':date()</span></p>
<p class="p_CodeBody"><span class="f_CodeBody"> &nbsp; return</span></p>
<p class="p_CodeBody"><span class="f_CodeBody">end</span></p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">In all cases, a QMBasic program can determine the log record location for an active phantom by use of the <span style="font-weight: bold;"><a href="qmbs_phlog.htm" class="topiclink">!PHLOG()</a></span> subroutine.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The <span style="font-weight: bold;">ACCOUNT</span> option specifies the name of the account in which the phantom process is to start execution, defaulting to the current account if omitted. The user must not be barred from access to this account or forced into some other account by the application <a href="application_level_security.htm" class="topiclink">security</a> controls.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The <span style="font-weight: bold;">DATA</span> keyword causes the <a href="data.htm" class="topiclink">DATA queue</a> of the process in which the <span style="font-weight: bold;">PHANTOM</span> command is executed to be passed into the phantom process, clearing it in the parent process.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">The <span style="font-weight: bold;">GROUP</span> keyword causes the phantom process to be grouped with its parent such that, if the parent process terminates, the phantom is automatically logged out.</p>
<p class="p_Normal">&nbsp;</p>
<p>The <span style="font-weight: bold;">USER</span> option allows the phantom process to be created as a specific user number within a range of numbers reserved by the <span style="font-weight: bold;"><a href="configparams.htm#phantoms" class="topiclink">PHANTOMS</a></span> configuration parameter. An error will occur if there is already a phantom running as the specified user.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span><br />
Any attempt to read data from the keyboard will cause the process to abort. <span style="font-weight: bold;"><a href="data.htm" class="topiclink">DATA</a></span> statements may be used in the phantom to supply input that would normally be read from the keyboard.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Phantom processes may not be started within a transaction.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>All QM processes, including phantoms, execute the VOC LOGIN paragraph, if it exists. To exit from the LOGIN paragraph for a phantom process, insert a line</p>
<p style="margin: 6px 0 6px 30px;"><span style="font-family: 'Courier New',Courier,monospace;">IF @TTY = 'phantom' THEN STOP</span></p>
<p>at the relevant point in the paragraph. See <a href="at_variables.htm#tty" class="topiclink">@TTY</a> for more details.</p>
<p class="p_Normal">&nbsp;</p>
<p class="p_Normal">Any <a href="create_key.htm" class="topiclink">secure encryption keys</a> enabled in the parent process are inherited by the phantom process.</p>
<p class="p_Normal">&nbsp;</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">Example</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">PHANTOM BASIC BP INVOICE</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>This command starts a phantom process to compile the QMBasic program INVOICE in the BP file.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">See also:</span></p>
<p><span style="font-weight: bold;"><a href="qmb_child.htm" class="topiclink">CHILD()</a></span>, <span style="font-weight: bold;"><a href="list_phantoms.htm" class="topiclink">LIST.PHANTOMS</a></span>, <span style="font-weight: bold;"><a href="qmbs_phlog.htm" class="topiclink">!PHLOG()</a></span>, <span style="font-weight: bold;"><a href="status.htm" class="topiclink">STATUS</a></span></p>

</td></tr></table>

</body>
</html>
