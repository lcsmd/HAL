<!DOCTYPE html>
<html>
<head>
   <title>&nbsp;SED - Extension Programming</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="SED extension programming" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "sed_extensionprogramming.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <h1 class="p_Heading1"><span class="f_Heading1">SED &nbsp;- &nbsp;Extension Programming</span></h1>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="titlepage.htm"><img src="top.gif" border=0 alt="Top"></a>&nbsp;
     <a href="sed_dynamickeybindings.htm"><img src="previous.gif" border=0 alt="Previous"></a>&nbsp;
     <a href="sed_extensionsvarconstfunc.htm"><img src="next.gif" border=0 alt="Next"></a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The extension programming feature allows users to add new functions to the editor. These may range from simple insertion or modification of text with a single keystroke to complex programs that manipulate the data to achieve tasks that are specific to your own editor usage.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Extensions may be stored in any QM file. Ideally, this should be a dynamic hashed file and SED uses &amp;SED.EXTENSIONS&amp; by default. A list of alternative locations to look for extensions can be defined using the $$EXTENSIONS variable described in <a href="sed_extensionsvarconstfunc.htm" class="topiclink">SED Extensions - Variables, Constants and Functions</a>. For all except the START.UP extension described below, if an extension is not found in any of these locations, a final check is made in the &amp;SED.EXTENSIONS&amp; file in the QMSYS account.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The editor looks for and executes an extension named START.UP on loading the first data record.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Extension names must be upper case and consist only of letters, digits, periods (.) and dollar signs.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Extensions must be compiled before use. This is performed using SED’s <span style="font-weight: bold;">COMPILE</span> command which recognises extension programs as distinct from QMBasic programs. The compiled version is stored in the same file as the source but with a suffix of -EXT added to the record name.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>An extension is executed by the SED <span style="font-weight: bold;">run extension </span>function which is normally bound as Esc-E. Extensions may also be bound directly to user defined key sequences or made available via the <span style="font-weight: bold;">command</span> function. Typically this would be performed by the optional START.UP extension.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">All those Brackets...</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The extension programming language is based on the LISP language. This yields programs with very simple, though somewhat strange looking, structure. </p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Extension programs come in two types; <span style="font-weight: bold;">procedures</span> perform some operation whereas <span style="font-weight: bold;">functions</span> also return a value. The outermost structure of a procedure is</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">PROC</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">(</span></p>
<p style="margin: 0 0 0 30px;"> &nbsp; ...<span style="font-style: italic;">operations</span>...</p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">)</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>and for a function it is</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">FUNC</span></p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">(</span></p>
<p style="margin: 0 0 0 30px;"> &nbsp; ...<span style="font-style: italic;">operations</span>...</p>
<p style="margin: 0 0 0 30px;"><span style="font-family: 'Courier New',Courier,monospace;">)</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>where ...<span style="font-style: italic;">operations</span>... is a sequence of steps that makes up the program.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>A function returns a value using the <span style="font-weight: bold;">return</span> operation at any point in its execution. There is an implicit return of a zero value at the end of the function text.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Each of these operations is also a procedure or a function in that they perform some operation on the editing environment and/or they return information that can be used by other operations.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>Each complete operation and any data items on which it works are enclosed in a further layer of brackets. Since the language allows functions to be nested to a high degree, a typical program at first appears to contain a large number of brackets. By applying some thought to the layout of the program, the actual structure can be made very clear to the reader. The language has no built-in format rules except that no token (individual word, constant, variable name, etc.) can span lines.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>For example, a simple program to provide the equivalent of the STAMP command of ED could be written as:</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;">PROC</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;">(</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;"> (goto.col 1)</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;"> (insert ‘*Last updated by ‘ @who ‘ (‘ @logname ‘)’</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;"> &nbsp; &nbsp; &nbsp; &nbsp; ‘ at ‘ (oconv @time ‘MTS’)</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;"> &nbsp; &nbsp; &nbsp; &nbsp; ‘ on ‘ (oconv @date ‘D4/’))</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;"> (newline 1)</span></p>
<p><span style="font-family: 'Courier New',Courier,monospace;">) </span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>The screen is not updated during execution of an extension program except by functions that are documented as doing so. This allows the extension program to perform complex data movements without the screen continually tracking the internal workings of the extension. The screen is updated when the extension terminates.</p>
<p><span style="font-size: 10pt; font-family: Arial,Helvetica,sans-serif; color: #000000;">&nbsp;</span></p>
<p>For detailed information follow the links below:</p>
<p style="margin: 10px 0 0 0;"><a href="sed_extensionsvarconstfunc.htm" class="topiclink">Variables, constants and functions</a></p>
<p style="margin: 10px 0 0 0;"><a href="sed_extensionsstdvarfunc.htm" class="topiclink">Standard variables and functions</a></p>
<p style="margin: 10px 0 0 0;"><a href="sed_extensionsargpassing.htm" class="topiclink">Argument passing</a></p>
<p style="margin: 10px 0 0 0;"><a href="sed_extensionslocalprocs.htm" class="topiclink">Local procedures and functions</a></p>
<p style="margin: 10px 0 0 0;"><a href="sed_extensionsexample.htm" class="topiclink">An example of a complex extension</a></p>

</td></tr></table>

</body>
</html>
