{
    "e24BlWvSLNM": {
        "title": "Self-Improving Agents are the future, letâ€™s build one",
        "thumbnail": "https://i.ytimg.com/vi/e24BlWvSLNM/hqdefault.jpg",
        "author": "David Ondrej",
        "date_of_release": "2024-03-24T20:53:40Z",
        "duration": "PT34M3S",
        "view_count": "64758",
        "like_count": "2079",
        "comment_count": "121",
        "description": "If you're serious about AI, and want to learn how to build Agents, join my community: https://www.skool.com/new-society\n\nFollow me on Twitter - https://x.com/DavidOndrej1\n\nPlease Subscribe.\n\nCredits: @matthew_berman @maya-akim @AssemblyAI \n\nThis video is a deep dive into AI Agents and how to design them with AutoGen Studio.",
        "transcript": "in this module I'll teach you how to build self-improving AI agents with the help of autogen studio and my C now autogen studio is a new AI agent interface developed by Microsoft now this tool is great because it doesn't require any coding to build teams of agents to set it up you need to run a few commands however right here I have a fresh MacBook with nothing installed on it so I'll show you step by step how to install python how to set up vs code just follow along what I'm doing and by the end of the video you will know how to build self-improving AI agents the first thing we need is to install vs code and if you get stuck at any point use CH gbt so when you're on vs code select your version it's going to download and the next thing we need is python python environments allow you to separate your projects normally managing them is quite difficult K makes this super easy Kio and do it directly so click on Mini Konda choose your installer save that vs code open with archive you have to unzip it for K go to your downloads click on minika and click on open and just click through this go through all the steps I literally just did this but OBS corrupt in my footage so if you're on Mac just search for terminal if you're on Windows press Windows plus r and type CMD let's say I didn't know that right how do I open the terminal on Windows use cgbd if you get stuck at any point right so now that we're in the terminal type k- DH version it should say something K 24 meaning we successfully have K installed beautiful now as for vs code we have to go to our applications and open up vs code from the apps now inside of vs code you have to do one more thing press shift command or control and P it will open this you have to type in Shell command install code to PA and click on this to create a new python environment with K just type the following K create dasn and then your environment name I'm just going to name it tutorial you can do anything you want and then we have to set up the python version Microsoft recommends 3.11 so I'm going to do that python equals 3.11 and hit enter this will start creating our new python environment hit enter again and we will use this to install the autogen studio package by the way anytime you want to have your terminal more organized just type clear and hit enter I'm going to do K EnV list and this command shows us all of the environments I have type K activate tutorial enter and as you can see on the left we have tutorial activate beautiful let's open up a blank folder so empty folder with nothing inside create a new file main.py now that we finally have working vs code and working K we need to install the autogen studio package and this is super simple just type in PIP install autogen studio and hit enter this will install everything autogen needs let's do clear again now there is one last command we have to run before we get the beautiful autogen Studio inter interface where we can build agents without coding to do that go to vs code click on Terminal and do new terminal you should also see the same name of your environment as you do in cond if you don't see the same name just go onto the bottom right click on the version this will pop up all the different environments so choose the one so like autogen and then when you start a new terminal it should be in that environment the last command we have to run autogen Studio ui-- Port 8081 D app there folder by the way all of these commands will be linked below the module so if you are inside of the community just go below the module and access them if you're not inside the community I highly recommend you join because we have a lot of great materials inside now to Open autogen studio do command and click or control click and there it is beautiful and now we can build agents that have the ability to self-improve skills this is basically tools that the agents can call so this piece of code will generate an image using D free so we can give this to our agent and it can generate images and we can have 10 20 30 tools like this and give them to our agents and make them more useful but what's even better and this is what I'm going to show you how to do is we can build a team of agents that can actually create their own tools and self-improve in that way model this is just a language model right you have gp4 Zephyr 7B we can have mistol Gemini clfree any model we want agents now this is where we build our agents here's an example we give it a name a description human input whether we want human in the loop system message temperature and we can give it skills so very very highly customizable and workflows this is the beauty of autogen this is what sets it apart from other agent framework tools is you can build complex workflows of the agents working together and creating something that J GPD alone definitely can't create to start with we have to connect our model because I want to be using gp4 turbo which is the best model from open AI to do that just type in open AI plat form and here click on login and log in with the same account you use for cgbd again the URL is platform. open.com it will be linked below the module on the left we're going to go to API Keys here you might see API keys so if you don't have anything don't worry just click on create new secret key you can probably name it just tutorial create secret key and I'm going to copy this this you shouldn't share with anybody and I will delete it before uploading the video If we go here we can paste it in here and it lets us use any of the models from open AI so actually I'm going to do one more thing I'm going to go back to vs code the folder that was created before right click create a new file and this is going to be our environment file now the last time a lot of people struggled with this it should be EnV not text it shouldn't have any text after it it should just be EnV inside I'm going to do open aior aior key equals and paste it in here and save it again I'll include a sample EnV file below the module that way you don't have to do all of this and you can just take it and use it right let's go back to autogen and we have to choose what model we want to use now that you have the API key click on done and go to documentation again we're on the platform. open.com click on documentation click on models and just copy this paste in Oren you can actually test whether your API key is working so click on test model and my is working right if it doesn't work it's probably because you haven't used any API Keys before so go to usage just connect your and charg in $5 and you will be good to go inside of autogen we have our new model so let's create a first agent click on agents new agent and this one is going to be the planner all right so I'm back on Windows and the reason for that is simple OBS on Mac OS is a disaster let's continue by the way this description is for the manager the main agent just so you know this is super important this agent writes clear stepbystep plans for the programmer okay so I should probably explain it the system even though I already explained it twice in previous recordings we will have three main agents and the fourth one will be the manager first one will be a planner this will create step-by-step plan based on our input second agent will be a programmer and third agent will be Optimizer which will look at the code and try to make it more efficient and this team of Agents should be enough to build a self-improving team of Agents uh this isn't that important I just like to do it like at four something lower auto reply we don't need to have any auto reply I think human input never we don't want human in the Loop in here now system message I have it prepared inside of vs code this one prompts folder I have four different prompts by the way they will be linked below the module so if you want all the code as well the prompts join the Community First Link in the description your task is to create step-by-step plans for the program agent to use do not write any code ever only create plans this is important take the input from the user and create three different plans choose the best plan and only send that one to the programmer but this is um default from Microsoft yes this is the default Microsoft prompt and it's actually optimized for a programmer really well so these are all from Microsoft and this is me again never say the word terminate this is important so let me copy this go back to autogen studio and paste in gbd4 Turbo and then temperature this is how creative the agent should be zero is the most consistent and the least creative two is like super creative but not that much consistency right so we can go probably 0.9 now let's do a new agent the programar this agent R clean and efficient code remember this description is for the manager so it has to be crystal clear it has to be super precise let's go back to my folder programmer let me walk you through it this is mostly from Microsoft actually because it was really good system prompt your task is to execute the plan you're given by the planner agent and to be honest you can spend like two or three hours just on one system prompt to make it really tuned right my goal is to just show you how to do it and you can build yourself anything you want because if you have a team of agents that can build new skills and self- improve you can do anything you want with that by the way you know if you see something there's a reason why you see it there's a reason why the prompt Engineers put it here so you can kind of imagine how the agents behave without this right soest the full code so this is very interesting a lot of beginner prompt Engineers don't repeat instructions but you can see this is basically the same as this just you know different wording so if you want to really highlight something in your custom instructions or your system promts feel free to repeat it there is no harm in doing that if it's important it should be repeated never say the word terminate this is important programmer never ends the workflow and copy go back to AO Studio model gbd4 turbo we want temperature very low because the plan is already created by the planner now we have two out of three agents so one more agent to go and this is our Optimizer this is Optimizer agent this agent only goes after the programmer here we can do default auto reply terminate actually because if there's nothing to improve we want it to terminate system message your task is to analyze and optimize the code given to you by the programmer agent be a specific as possible when suggesting optimizations of the code if the code from the programmer agent looks good and doesn't require any major changes end the session with the word terminate so let's save this and copy boom again gp4 turbo for this guy we can go quite High maybe even one because it's suggesting ideas now we have our fre agents let's build a workflow out of them click on the three dots and do group chat and this allows you to have more than two agents I'm going to name it plan code optimize as you can see we have sender and receiver and we don't have to change this this honestly at all now here in the group chat assistant this is like the manager this is where we have to be careful because this is very important right this is the agents in our group obviously we add the three we just created selection method I think Auto is the best it lets the manager choose the one that should be running the next group chat assistant is a fine name I like manager more as you can see there is like way more consecutive order replies for the manager let's just leave it low this is a manager agent that controls and directs other agents here human input never we could build agent systems with human in the loop but honestly the point of agents to is to make them autonomous right now system message I already have this one written out now this one I wrote with the help of Chad GPD that's why it's a bit longer you are the manager agent the central coordinator responsible for orchestrating the seamless collaboration between planner programmer and Optimizer so what I did is I explained to C GPT what the manager should do and then I told it to repeat the process three different times without changing it so as you can see begins with a planner following the planner the programmer and then it reiterates so I'm using what I said before repeating the most important part which in case of the manager it's by far the process it shouldn't mess this up if it sends the first uh output to the optimizer then like it messes everything up so that's why it's um multiple times reiterated what it should be doing and then the last sentence as you can see when the optimizer cannot find any more ways to improve the code code your task is to end the session by writing the word terminate copy give it to the system message temperature probably should be low point1 is good I think and okay so now we have our workflow the next step is to go into the playground and create a session and actually test it out all right so let's create a new session here you have to select which workflow will be active in this session and you can think of sessions as chats inside of chat gbd obviously we can choose any of these I'm going to use the one we created plan code optimize create now this is the test this is where we will see if our agents are good enough if my prompt engineering was good enough to build these agents so they can self-improve so I'm going to do this create a function that takes user input and gets the exact coordinates of that location using the Google Maps Geo coding API let's see if our team of Agents can handle this okay it's running and we should probably see it inside of vs code terminal the processes yep so as you can see this is the user proxy agent which takes our prompt and sends it to the manager and it would be actually nice if Microsoft could make this more visual inside of autogen studio right here in the web browser so you don't have to rely on the terminal as much but let's see okay we have the plan we have three plans and then which is the best plan plan line one okay beautiful so the first step worked manager successfully called the planner request reply false Center type CH okay okay okay Center planner so let's see programmer beautiful to proceed with plan one yes and it's writing the code and Optimizer to manager okay let's go back into autogen okay okay and then it sends back to programmer beautiful so we have a loop we have a self-improving loop this is amazing and let's see what happens now programmer should not end this so hopefully it sends into the optimizer again yes Optimizer to manager did it terminate it did terminate oh my God this is so good man so good it's always satisfying seeing your new team of Agents work okay so we had one uh I mean two Loops of programmer writing something sending to Optimizer finding improvements sending it back to programmer programmer correcting the code improving it sending the optimizer Optimizer approving it and terminating it and now we should go back here here and we see it code you've provided is well structured ad here okay so let's look at the file where it's empty we've seen the agent messages head code right yeah here is the function maybe it just there was just an error outputting into the python file which again it's in beta as you can see autogen Studio beta so it's not perfect let's copy this but the one issue I found if you press this button it actually copies the entire chat so you still should copy this like this and the name should be G geoc Cod location. py on the left I'm going to do go to skills and add the skill and I'm going to name it get coordinates and replace the default with the one our agents just coded so let's see import os. n Okay Google Maps API key so this is how we have to name it in the environment variable so I'm going to copy this go back to our EnV and obviously right now we don't have the API ke so we have to provide it so I already have one gen at it so yeah if you don't have the API go here developers.google.com geocoding and you have to create a Google Cloud account and get your API key let's go back here and paste the API key I have in here again I'm going to delete both of these before I release this so don't worry so as you can see we've added a new skill now all of our future agents have just become improved and I didn't code this the agents coded this which is beautiful so we'll see if this works uh on first glance it looks good we'll see now let's create a new agent we can name this like I don't know location finder finds the exact coordinates of a location using the get coordinates skill your only task is to take the user input and run it through the get coordinates scale gb4 turbo as well temperature zero the reason why I do temperature zero is because I don't want this guy to be creative I want it to I want him to follow instructions precisely so skills this is important we have to give him the get coordinate skill actually so add skill and save let's create a new workflow for this one we don't have to do group chat two agents should be good enough find exact location and user proxy again don't have to do much changes probably blah blah blah model turbo preview temperature zero looks good now receiver here we change it to our location finder so as you can see we can at the very bottom we can replace it with existing agent so I'm going to do location finder and just make sure it has the skill okay playground and new session find exact location and let's do a test let's do Mount Everest and let's see if it works if it does it means our agents just self-improved because they created a capability skill they did not have before let's see Wikipedia uh it should not call Wikipedia yeah what is this writing oh no this is not looking too good a what's going on location finder should not behave like that seems like user proxy messed this up nine messages this should be two messages okay let's go back and adjust our workflow let's do it to one maybe and let's be a bit more specific take the exact word for word input from the user and send it to the location finder do not write anything else do not add any extra text I'm being Ultra descriptive here that way nothing changes save and let's go to location finder and let's do one as well that way we don't have any nine messages okay good save it and let's create a new session with our find exact location and let's try again let's try um let's do Great Pyramid of Giza let's see but I can't execute similar extern call incl making API calls all right so let's go back to our plan optimized code I'm going to feed them the entire function and then I'm going to do great job just add a simple example at the very end of the code showing other agents how to use this tool so I mean I could do this myself obviously but I'm going to use our team of Agents a programming team of agents to do this we can actually see how much usage uh we're getting so all of this for 0.22 today which is very cheap obviously if you wanted to hire a person to do this it would be much more expensive I don't know why this is happening this seems to be a bug so I'm just going to copy this um this is a bad example you can do better the example should be using the actual function not just plain words what is going on here factorial what is this our agents are doing something way more advanced than what I asked for I think that's my fault because the agents don't have access to the previous like they don't have memory right uh they only work with what you give them so I'm going to take this and create a new session change the last four comments of this code to properly show how to use this code with a location by calling the function obviously the speed is one uh issue because we're using gbt 4 Turbo which I mean it is Turbo so it's faster than normal gbd4 but it's still a state-of-the-art language model it still has like 1.8 trillion parameters or something if we wanted to go super fast I would use Gro API let's actually this would be fun test can do the same exact prompt Let's test it out obviously we have worst language models the best one is Lama 270b so we're going to use that let's see if Lama 2 and look at the speed you are in the que and boom this is insane the gro API chip by the way Gro with a Q not elon's Gro probably did what I asked much faster okay this is actually terrible never mind ignore what I said uh the example is bad maybe there's issue with this function actually oh yeah yeah it shouldn't be using the input that is the main problem let's see did this give us a better example of calling the function oh yes it's okay so this is this is way better than I expected I only wanted it to do the comments to update the comments but it realize that in order to make that specific in order to make that actually work they had to also update the function and take the per parameter as a location which I overlooked and you know before they just asked the user input which obviously you there is no human in the loop so this is terrible approach even though I I didn't spot that they were able to figure that that out on their own and this is the power of having multi-agent systems amazing so let's copy this and let's see if it works go back to our skill and replace everything with this and now it's taking the location as a parameter in the function which means the agent is able to input the location all right beautiful save let's go back here and create a new session with the location one and let's test out different location I don't know we could do Mariana Trench and let's see if the actually works man this is like so much anticipation it's crazy okay it did not work I'm sorry but I can't execute or simulate external code I don't know what's the issue because I literally was able to get this to work earlier so let's debug it with our code right I'm going to take this here I'm going to paste the entire code again I'm going to give it the exact issue the agent run into when I give the code above to my AI agent I get the following eror see if you can adjust the code in any way so that it's easy for AI agents to use it let's see if our team of Agents can give us code that's simpler modify the okay best plan fre okay direct instructions within code comments suggest creating a rapper function modified function for direct use and update commands I mean maybe maybe there's issue with the prompt engineering what okay there is an issue in the workflow planner called Optimizer so as you can see building agents isn't as easy as it might seem but that's where the rewards come in because so few people can do this and let's do a new random location okay Taj Mahal is good let's so let's show India some love and I mean the process of Agents is literally this like iterate Improvement and also you know now we have a team of programmers that can build functions what we could also do is build a team of prompt Engineers that way you know I don't have to do what I just did just like trying to reverse engineer the agents I could build a team of like this is really the only two teams you need to build like a self-improving squad of Agents okay we got a long response Google Maps API key is this saved correctly geocoding API eror 6 let's click on the geocoding API by the way I'm in console. cloud.google.com keys and credentials so now I will double check that I am not trolling and I have the correct API key show key copy seems to be the exact same key the agents should have access to the environment file that could be one issue that they don't I don't know I mean this seems to be like progress but but I've really confused okay user proxy sends Taj Mahal to location finder and then location finder starts causing issues the great irony here is of course it worked perfectly before and now when I'm finally successfully recording it doesn't but hey one thing I definitely should have done earlier is to try and get her friend CH gbd to help us so here is a function that my team of AI agents has developed let's see what sh gbd comes up with API key verification yeah so okay I'm going to show you my Google collab this is when I was learning how to use the geocoding API and we can test it out right let's do Mount Everest and it works right we have this locations get addressed Mount Everest so the API works I'm using the same API key you know because agents aren't perfect so maybe we should just give it a second shot I did a bunch of research and when I saw other people build self-improving AI agents the results were not 100% in fact there between like 30 and 60% of the time the agent succeeded and that could be a combination of multiple things you know it could be uh just suboptimal prompting by my end or it could be that the llm gbd4 turbo isn't good enough or it could just be the manager assigning the agents in a wrong order there's a lot of factors that could prevent our team our team of Agents from achieving the desired result but honestly all of those factors will be solved within the next 12 to 18 months so if you learn these skills now when we have better llms like you'll be set right plan one plan two Plan Three Plan Three okay so this is very good example of why generating free plans is good it chose the Plan Three as the best one if it only generated one it would never get to plan three cuz it would just have plan one in fact you know what let's just go in here and create a new folder in vs code new folder and I'm going to name it skills and I'm just going to create a new file and this is going to be get coordinates 01 02 actually. py and here we will store all the different attempts by AI Google Maps is highlighted I don't know if that's a real thing I don't know if it's a real package maybe that's just hallucination from our Asian team but doesn't matter let's copy it and let's test it out I mean you can't expect everything to work on the first try right playground let's do a new session location finding let's do tge Mahal again okay it's the same message I can't execute the code or access external apis in real time so this one did not work let's try again I'm going to use cat gbt to optimize my prompt suggest 10 okay seven simple ways I could optimize The Prompt further oh yeah that's true it should probably be again this doesn't matter but geocoding API key that way they know to use the geocoding API include a block of code at the top that ignores SSL certificate errors this is another trick that might work mention the specific Google Maps Okay yeah I should probably give it the U URL parameters this is by far the best problem we have so far actually let's maybe try to build a new workflow maybe the issue is in our workflow actually and maybe we can remove the planner hm okay simple programming team okay group chat assistant now here let's do only programmer and Optimizer and I'm going to leave this super vague because maybe simpler is better who knows I mean the those Suggestions by tgbt were really useful variable naming but it was confusing when it's Google Maps apiq when it should be specifically the geocoding API then error handling this was useful and also this was very useful specify the end point exactly this was faster obviously because we removed One agent this seems like the most promising so far I'm going to save it as our skill okay no errors very promising let's go back to our skills and replace this delete this agent let's delete this workflow and create a new agent we name it Maps expert agents new workflow geocoding primary assistant should be Maps expert okay let's do a different location do Niagara false what is going on man and also I don't know whether our simple programming team is better than the full one programmer gave us code but then Optimizer found some improvements I guess okay so let's try both we can try both the default programmer one and the optimized one and really this is a game of iterative improvement so all you really need is a crazy amount of patience to be honest or maybe we can try Gemini because actually it has better internet capability wow I just discovered a new functionality within Gemini you can select text and change that explain more simply okay I did not know know this was a thing okay so let's launch it again autogen Studio ui-- Port 8082 Das Das app de SRC create a new directory a new folder SRC and we have our new folder right here we can close the old one SRC boom let's copy the environment variable actually into here and let's just build a simple two agent let's just do planner programmer workflow group chat okay group chat assistant boom boom we have to do planner and programmer let's hit playground programming team create hopefully this prompt isn't confusing if the API key is not found try checking for the EnV file within the SRC folder this is crazy man why is programmer going first planner going second then programmer again then planner what are they talking about like the programmer codes it in the first message and they just have a chat I mean the agents are just talking one to one another copy this go to build skills actually let me just save this again new file okay GE coding 04 save no errors which is good name it get coordinates save you know what let's do a super simple workflow two agents and maybe it's actually better to keep Microsoft's optimized prompt maybe I should have gotten that idea earlier if the user tells you to find coordinates of a specific location use the get coordinates skill you have access to by calling this function with the location as the parameter new session with geocoding let's do find the exact coordinates of Mount Everest oh my God I think it worked I think our agent successfully self-improved no way I mean it took them a few tries I'll be honest oh so it has to do this from skills import get coordinates okay so maybe it is good to keep that long Microsoft prompt so that it knows how to do this but let's test it out latitude and longitude okay let's try a different side and test get address beautiful it's in Nepal meaning it works to double check that Asian Works beautiful so let's try again the Great Pyramid of Giza you know if we get backto back success then Wow Let's double check it Great Pyramid of Giza man it took long longer than expected especially given that my first two attempts were completely ruined by OBS but we are here so the takeaway is that Microsoft's prompt is quite optimized for agents to be able to run functions so if if you can use that prompt at least for one of your agents the one that is calling the function so that is the takeaway you can do this for any API obviously geocoding has limited use cases I mean you could build some interesting applications obviously with maps but you can choose any API you want any service you want and tell your agents to connect to that API to build a function for that add it to your skills and like you can have 10 20 30 different skills in here and then build agent teams that utilize those skills to do things that you couldn't do with chbt so hopefully you find this useful if you want the exact prompts and if you are not in my community and want to access a sample environment V variable as well as all the different prompts and um code then make sure to join my community it's the first link in the description thanks for watching"
    }
}