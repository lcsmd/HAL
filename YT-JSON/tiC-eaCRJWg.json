{
    "tiC-eaCRJWg": {
        "title": "What Software is Running in my Home Lab???",
        "thumbnail": "https://i.ytimg.com/vi/tiC-eaCRJWg/hqdefault.jpg",
        "author": "Raid Owl",
        "date_of_release": "2023-12-10T13:45:22Z",
        "duration": "PT24M38S",
        "view_count": "133202",
        "like_count": "3518",
        "comment_count": "194",
        "description": "Related Videos:\nHome Lab Tour (hardware) - https://youtu.be/nXpbCpk_B74\nHow I Backup Data - https://www.youtube.com/watch?v=Zz7DzXub5aY\nUnifi Setup - https://www.youtube.com/watch?v=wi_geRfabAs\nOmada Setup - https://www.youtube.com/watch?v=hsJ0bxGVZDs\nOmada Short Stack - https://www.youtube.com/watch?v=DdEcQaS6Gew\nReolink Setup - https://www.youtube.com/watch?v=Z6vfUL_TYSI\nMinecraft in Docker - https://www.youtube.com/watch?v=f1cGEr9L67Y\nDashboards Review - https://www.youtube.com/watch?v=u5blATj71o4\nAmerican Cloud hosting - https://www.youtube.com/watch?v=eiyjW3cA5EQ\nNginx PM w/ Cloudflare - https://www.youtube.com/watch?v=GarMdDTAZJo\nKubernetes Learned in a Week - https://www.youtube.com/watch?v=WmEwhfwu66M\n\nHardware:\nNetworking:\nMy Unifi Affiliate Link - https://store.ui.com/us/en?a_aid=RaidOwl\nUDM Pro - https://store.ui.com/us/en/pro/category/all-unifi-cloud-gateways/products/udm-pro?a_aid=RaidOwl\nEnterprise 24 PoE - https://store.ui.com/us/en/pro/products/usw-enterprise-24-poe?a_aid=RaidOwl\nEnterprise XG - https://store.ui.com/us/en/pro/products/usw-enterprisexg-24?a_aid=RaidOwl\nEnterprise 8 - https://store.ui.com/us/en/pro/products/switch-enterprise-8-poe?a_aid=RaidOwl\nFlex XG - https://store.ui.com/us/en/pro/products/unifi-flex-xg?a_aid=RaidOwl\nFlex Mini - https://store.ui.com/us/en/pro/products/usw-flex-mini?a_aid=RaidOwl\nIW HD - https://amzn.to/46L7MmG\nU6 Pro - https://store.ui.com/us/en/pro/category/all-wifi/products/u6-pro?a_aid=RaidOwl\nU6 LR - https://store.ui.com/us/en/pro/category/wifi-flagship/products/u6-lr?a_aid=RaidOwl\nOmada Controller - https://amzn.to/482jASv\nOmada Firewall - https://amzn.to/47G8tiD\nOmada AP - https://amzn.to/47ZD9Lj\nPatchBox - https://link.rdwl.me/EY1yb\nBlue Patch Cables - https://amzn.to/3Gpouxi\n\nServers:\nMain\nEPYC 7302 - https://amzn.to/3Gpzg6z\nASRock Rack ROMED8-2T - https://www.asrockrack.com/general/productdetail.asp?Model=ROMED8-2T#Specifications\nNoctua NH-U9 - https://amzn.to/47Dv0g1\nMellanox ConnectX-3 - https://amzn.to/3uA8c1S\nLSI 9201 - https://amzn.to/3NcBbiW\nRosewill 4u Chassis - https://amzn.to/3R4bAtp\nRails for Rosewill - https://amzn.to/46I6w3T\n\nHA Cluster\nSuperMicro X10SDV-4C-TLN2F - https://www.ebay.com/itm/284496569609\nMicron 7400 Pro - https://amzn.to/3uA8gPa\nInWin IW RF100 - https://amzn.to/47CuHln\n\nMain PC\n13900k - https://amzn.to/47LmUlC\nRTX 4090 - https://amzn.to/412dkIp\nGigabyte AORUS z790 - https://amzn.to/46G9dD1\nCorsair Vengeance - https://amzn.to/47G7LBZ\nSilverStone 5u Chassis - https://amzn.to/47BHYL2\n\nSynology RS822+ - https://amzn.to/419Cgxx\nSynology DS923+ - https://amzn.to/3R4HqX2\n45Homelab HL15 - https://link.rdwl.me/SDsWw\n\nMisc:\nMini Split AC - https://amzn.to/3RqFIAI\nMini PC - https://amzn.to/3uLJ2xC\nTinyPilot KVM - https://link.rdwl.me/hIeTf\nNavepoint 42 Rack - https://amzn.to/3GrzwCg\nTrippLite 1500 UPS - https://amzn.to/3T4I3lZ\nTrippLite KVM - https://amzn.to/3T8pT2N\nMagnetic Monitor Mount - https://amzn.to/3sRG4XL\nRackstuds - https://amzn.to/3RqvfnR\n\n-------------------------------------------------------------------------------------------\nðŸ›’  Amazon Shop - https://www.amazon.com/shop/raidowl\nðŸ‘•  Merch - https://www.raidowlstore.com\nðŸ”¥ Check out today's best deals from Newegg: https://howl.me/cjNc3sze2O3\n-------------------------------------------------------------------------------------------\n\nJoin the Discord: https://discord.gg/CUzhMSS7qd\n\nBecome a Channel Member!\nhttps://www.youtube.com/channel/UC9evhW4JB_UdXSLeZGy8lGw/join\n\nSupport the channel on: \nPatreon - https://www.patreon.com/RaidOwl\nDiscord - https://bit.ly/3J53xYs\nPaypal - https://bit.ly/3Fcrs5V\n\nMy Hardware:\nIntel 13900k - https://amzn.to/3Z6CGSY\nSamsung 980 2TB - https://amzn.to/3myEa85\nLogitech G513 - https://amzn.to/3sPS6yv\nLogitech G703 - https://shop-links.co/cgVV8GQizYq\nWD Ultrastar 12TB - https://amzn.to/3EvOPXc\n\nMy Studio Equipment:\nSony FX3 - https://shop-links.co/cgVV8HHF3mX / https://amzn.to/3qq4Jxl\nSony 24mm 1.4 GM - https://shop-links.co/cgVV8HuQfCc\nTascam DR-40x Audio Recorder - https://shop-links.co/cgVV8G3Xt0e\nRode NTG4+ Mic - https://amzn.to/3JuElLs\nAtmos NinjaV - https://amzn.to/3Hi0ue1\nGodox SL150 Light - https://amzn.to/3Es0Qg3\n\nhttps://links.hostowl.net/\n\n0:00 Intro\n0:31 Networking\n5:50 My main Server - Proxmox\n6:15 TrueNAS\n8:33 Docker\n10:27 LocalAI\n11:32 Plex\n12:03 Random stuff on main server\n12:25 HA Proxmox Cluster\n13:36 Kubernetes cluster\n14:41 HA Docker\n15:09 arr stack\n15:25 Shlink\n15:55 pihole\n16:13 Nginx Proxy Manager\n16:40 Homarr dashboard\n17:33 Owncast\n18:39 Synology Setups\n20:24 MISC stuff\n23:17 Conclusion",
        "transcript": "a home lab is the sum of two parts the software stack you run and the hardware you choose to run it on now I've already done a tour of my home lab as it pertains to the hardware I'm running so today we're going to do another tour this time it'll be more virtual as we take a look at everything I'm running from UniFi Network proxmox tress anology local AI Docker kubernetes and all kinds of goodies and treats if this gets your Jimmy's wrestling then buckle cuz here we go let's start at the top with networking I run all external Services I'm hosting through cloudflare and I'm using their load balancer so that in the event that one of my WS goes down my external services will still know where to go for $5 a month I think it's worth it speaking of dual WS I have AT&T fiber and xinity both in pass through mode feeding into my UniFi dream machine pro this uses my AT&T as a primary and Xfinity as a backup I'm running pretty much all ubiquity gear so you can guess that UniFi network is my sdn I was previously running all ubiquity switches and access points with a PF sense Gateway but I dove all the way into the UniFi World by switching to a udm pro I cover my full thoughts on this in a separate video so I don't want to go into too much detail but for the most part I'd say it was a wash UniFi UI is certainly visually pleasing with plent of nice graphics and pages to make you go ooh and ah but we don't really care about that right now what we do care about is what I'm actually doing with it let's take a look at how I use vlans to separate my network into different pieces I have a total of six vlans which may be a lot or very little depending on how thick your tin foil hat is I my main land then five different vlans guest iot landan 2 external and Seth most of my stuff lives on my main land since it's pretty much just me here the guest VL is you guessed it for guests this is the network everyone except me and my wife are on if they come over the iotv L is for yep wow you guys are so smart my iot devices this includes my security cameras thermostats sprinkler system ring alarm random smart plugs stuff like that which needs connection to the internet but doesn't really need to touch anything else on my network L 2 Okay this may be a little harder to guess I use this to separate my test omata network from everything else I have a little tplink omata short stack running that I use to check omata upgrades and stuff like that so this is how I keep it my dirty little secret I guess I probably could name it something better the external VL is for my kubernetes and Docker services that are used to expose things to the outside world if you're exposing anything yourself I strongly recommend that you throw that stuff in a specific VLAN and only allow it to communicate internally to devices that are absolutely necessary I'll show you how I'm doing this in a bit the last one is a VLAN for our SEF cluster this solely exists as a SEF Network and has no reason to communicate with any other devices as they only talk to each other anyway I could probably get away with fewer vlans or I could be more anal and add more but this works for me now to make sure I know which VLS are allowed to talk to each other I have firewall rules set up or traffic rules in the UniFi Network I'm honestly not a huge fan of how UniFi handles firewall rules and inner VLAN rules but my setup works so whatever looking at my traffic rules you'll see that they're in a random order which is actually the order that they're created not the order that they're processed UniFi seems to do blocking rules first then allows I have my external iot and Lan 2 networks blocked from reaching out to anything then I have Seth blocked to and from everything then everything blocked from reaching my main land then since I want my main land to be able to reach out to other networks I have an allow rule set up to let it do that then another allow rule to let my external network talk to my Seth network over in the IP addresses section I have a few specific allow rules that let my external network communicate with only specific devices on my land rather than just opening up the whole thing if you're wondering where the guest VI land is well I have that marked as isolated meaning that nothing can get in or out no matter what traffic rules you deploy it would be nice to have the option of the traffic rules overriding this and obviously allow us to put the rules in the order we want but I'm not holding my breath the last thing I want to touch on is my VPN I'm running openvpn server in UniFi Network that allows me to connect back to my network when I'm out and about it also lets me easily access remote devices that I deploy as you'll see later in this video I'll probably switch to wire guard soon as it is a good bit faster than openvpn but I'm seeing some bugs in Mac OS at the moment and as soon as those are fixed we're switching I'm also running openvpn client in UniFi as well I use Pia as my VPN of choice to Route specific traffic through there right now I have everything from the guest and iot networks going through IIA as well as my VPN virtual machine that I use for watching Pirates of the Caribbean on Loop okay that covers my network I know there's plenty that I didn't cover but this is a full homelab tour so we got to move on if you want to see a full Network walk through then let me know down in the comments and maybe I'll make your dreams come true all righty let's start with my main server which has been the rock of my home lab for the last 3 years it's running proxmox which you'll notice is a common theme here I use this server as my Powerhouse since it's by far the most powerful device in my lab but I wouldn't really say I'm using it to its full potential proxmox host itself has two 10 GB connections coming in one is dedicated to my trass VM and the other is for everything else speaking of trass this is my main Nas operating system of choice I have 12 12 TB drives that are connected to an LSI 9201 hbaa card then I'm passing that entire card through to tress this prevents me from having to deal with individual drives as that sounds like a pain this isn't the only thing I'm passing through either I also have a 40 GB melanox connect X3 and an Asus hyper m.2 card with 4 2 TB mvme drives the connect X3 gives me a full 40 GB connection directly to my workstation PC and is extremely unnecessary but most of my lab is the nvme drives are passed through individually though since that is how they're seing by the host and then utilizing them in a raid Z1 pool to give me super fast network storage yes I know this is bottlenecked by the network with insess I'm not doing anything crazy my main pool with these 12 TB drives is broken down in three separate raid Z1 vdevs I'm also using two ssds in a mirrored config as a metadata cache it's been running great for years no dead drives great speeds probably the most reliable piece in my home lab my shares aren't anything to write home about either I'm using SMB since all my shares need to be accessed by my Windows machine at some point and I only have three two of them are on my main pool for media and then everything else then the other is on my nvme pool you'll notice that in my lab things may be a bit more simple since I'm literally the only one messing with stuff which is probably different if you're used to working for small businesses or something now how I back up my data from here maybe a bit controversial as I'm using rsync in a perfect world you'd probably back up your ZFS system via snapshots and replication but this ain't a perfect world I just put out an entire video on how I backup my home lab which I'll link down below but at a high level basically I replaced my ZFS backup server with a sonology systemology runs butter FS which does support snapshots and replication just not from a ZFS system therefore rsync okay moving on to the next most important VM on my main server my auntu server VM running Docker you noticed I'm running my stuff exclusively on VMS as opposed to lxc Containers which essentially just comes down to preference I like working with VMS and a separate kernel from the host if you like containers then use containers this Docker VM used to run pretty much everything in my home lab but I've slowly started moving everything from there to my proxmox cluster that you'll see in a bit right now it's running nextcloud two Minecraft servers uptime Kuma my little link page and an engine X load balcer next cloud is pretty great and I've actually started to use it for more than just Cloud file storage turns out there's a whole Suite of software in there from Office chat video conferencing organization and even AI which we do dabble in a bit the Minecraft servers run on here since they can utilize the Epic CPU and 256 gigs of RAM a bit better than most other things I currently have these deployed and backed up pretty manually with Docker compose and KRON jobs but I do want to move them to pterodactyl so I'll probably be adding plenty of views to techno's video soon uptime Kuma runs on here and has absolutely zero reason to it would make way more sense for the service that is making sure everything is running if it was running on my highly available cluster so that'll be moved soon same thing with the little link server another techno Tim shout out it has no reason to run on here and is going to be moved the engine X load balancer is actually being moved as well and I have it running in the ha cluster already just to make sure everything is good before sending this one down the old dusty trail so yeah a once bustling Mecca of Docker Services is now a ghost town and that's okay I did say we were d in in Ai and we are doing that through a self-hosted instance of local AI it's running directly in an auntu VM via Docker and to spice it up I'm passing through an RTX 2070 super to give it some Cuda power I'm not going to pretend to be an AI expert or even competent for that matter this is very much a learning experience and was initially spun up to use the nexcloud AI assistant right now it's only set up for text processing and I'm using a llama model that supports Cuda so it's making good use of that GPU what I've learned so far is that I now understand why you hear about AI machines needing multiple high-end gpus with plenty of vram this GPU has 8 GB and is barely enough to load in two small models when I was browsing for models to use there were some that were like 16 or 20 GB wild so yeah it's pretty cool it works I can change models and see how the response has change and stuff but again we're learning moving on oh look another auntu VM this time Ubuntu desktop running Plex why well I set up this VM a long time ago and figured it would be easier to just install Plex via the App Store so I did and it's in its own VM cuz I wanted to eventually pass through a GPU to it after a few years I'm very much ready to move this thing to Docker and have no real need for a GPU since it doesn't really transcode very much anyway the last few things aren't used too much one is my test setup for xcp I have two VMS for this and with the new 8.1 release I'll be trying that out more thoroughly then I have a Windows VM and a Mac OS VM you never know when you'll need one and it's nice to have them for when that reason comes up okay let's keep on keeping on next is my highly available cluster I set this thing up a few months ago with the reasoning that I wanted an ha system and I wanted to start learning about Seth this proxmox ha cluster is composed of three identical systems since they are in a cluster their resources are shared giving me a total of 12 cores 24 threads 192 GB of RAM and 6 TB of high-speed storage on here I'm running a three node k3s kubernetes cluster and a single Docker VM all of which is in ha mode meaning that if the host goes down that VM is spun up on another node this all works due to Seth which gives us shared storage for the cluster since each node can access the same storage and each VM is running on that storage we have no problems migrating VMS on a host failure I would go more into Seth if I knew what the hell I was talking about but at a high level it's acting as highly available storage so three drives are pulled together and then when something is written to that it'll physically write it to at least two of the drives which gives you redundancy on losing a host or a single Drive okay kubernetes let me start by saying I don't think anyone needs kubernetes in their home lab it's complex tedious a Painis support and Overkill but man when it works it's freaking cool my 3 node k3s setup is running a single node on each host node each node is a control plane and a worker cuz well why not my setup isn't that hardcore and since I'm using k3s we are controlling everything with a Rancher I'm a pretty big fan of Rancher as it does a solid job of making kubernetes seem less spooky in here I'm not running too much one is my jaal static site that I host all my documentation that I write on a regular basis and the other is a side project that I'm working on which is a nodejs API with a mySQL database all of this is deployed via config files manually and updated manually as well I'd like to eventually incorporate some automated deployment on git pushes but it's one of those things where I have other things I'm more invested in so this gets kicked down the road the docker VM works pretty much the same way in that if the host it's running on goes down it will automatically be spun up on another one this is where I have been moving all of my main Docker Services too and here we're running an R stack composed of sonar radar Prowler overseer here in Sab nzbd then we're running schlink engine X load balancer py hole engine X proxy manager home R and own cast I'm using my R stack for automatically searching downloading and managing all the Linux isos and news articles that I use on a daily basis it's a pretty cool setup but due to um time constraints I can't really go into too much more detail on those moving on we have a pretty cool service I've been for a while called schlink basically a URL shortener and tracker that let you take any link and make it a shortened version using the domain you provide it'll also track how many times it was clicked where people are clicking from what device they're using and stuff like that this is pretty useful when I put a link in my videos to have that data available when negotiating with brands also I just like self-hosting a URL shortening service now we already talked about the engine X load balcer that just fors track traffic to my k3s cluster so let's get into py hole everyone knows what py hole is so we won't spend too much time here I'm actually only using py hole for DNS since UniFi implementation of DNS is absolute butt cheeks next is engine X proxy manager a very important service in my lab this lets me take all the traffic coming in from cloud flare and Route it to the service it needs to reach on my home lab when I was running pfSense I was using the built-in ha Pro plugin but since UniFi doesn't have a reverse proxy we're using npm I have no complaints here it even has let's encrypt certificate integration so your data is nice and encrypted while in flight then we have h r which is my home lab dashboard tool I was initially using Heim doll then I switched to Homer now I'm using h r as I think they fixed most of my initial complaints plus it integrates very well with my rstack I can reach any of my services with a a single click and it even pings them to let me know if they're down and as you can see it's showing a lot of things down this isn't because they're actually down this is because it's hosted here in the external VLAN but remember we only have access to tras Plex and our cluster hosts on the main land so everything else is getting blocked I can still click and access them from my local machine but to fix this I'll either have to allow more connections or move it back to the main land we'll see this is a really cool little dashboard tool and I'd recommend you give it a try the last thing I want to talk about is onast this is a selfhosted streaming server that also spins up a website to view the live stream it's pretty customizable but I'm running a barebones version since it's only for a few people anyway onast will give you an rtmp URL that you plug into your streaming software of choice then you can specify what resolutions and bit rates you want your viewer to be able to use the more transcoding the server has to to do the more resources it's going to use though I have Minds set to not actually do any transcoding at all there's a setting in there that just passes the stream through directly to the viewer so as long as you're encoding in something popular like h264 then you're probably good and there's no resource hit to the server if you want to be able to easily spin up your own personal streaming page then consider giving it a try now I'm always running more stuff on here to test out but those are all the services I actually use on a day-to-day basis is it a lot not at all I've seen people hosting more things on a Raspberry Pi but I'm not really in this to have the most proper and efficient home lab I'm me to have fun okay so next up is our sonology systems I'm running one sonology device locally for backups then another remotely for remote backups I really like theology ecosystem as I think they pretty much nailed it down when it comes to ease of use I mentioned that I'm using rsync to get all of my data from my true system to the local sonology this is a pretty simple process that runs daily and then once the data is stored on the sonology it can perform snapshots on there so we have some file protection but for all my personal devices I'm using active backup for business this software is freaking awesome you just install the agent on whatever machine you want to back up and through the UI on your server you can select what when and how everything is backed up from that device there's also no need to run snapshots here because it does have built-in versioning with a super easy to ous Restoration UI this is also how we are backing up everything remotely too and the main reason why I switched to sonology a remote system is running at my friend's house and using active backup for business and our openvpn server from earlier we can back up our entire local sonology system to a remote one I run this twice a week which is plenty and honestly I'm thinking of dropping it back to once a week now this isn't the only way to do this as there are plenty of different ways to back up your files the one I used to use is sync things so check that out if you don't want to dive into the sonology ecosystem there are plenty of other things you can do on these devices since they straight up have VM management and Docker apps but considering the hardware I already have let's just stick to letting these do what they do best store anime there are a few other things I want to cover here but I don't really have a cohesive theme to them so let's just call them miscellaneous the first being my hl5 at the time I'm making this video it's not officially deployed yet but I'm currently using it to get more familiar with Windows Server so far the machine is awesome Windows Server though well you'll see when that video goes live for security I'm using real link cameras and their NVR in the super saturated Market that is security cameras I think real link is up there in terms of quality features and price are they the absolute best no but I've been using them for a while now and they've been solid the NVR and all the cameras sit in the iotv land cuz well duh and I can access them from anywhere Via Real links remote connection to the NVR for my Mini PC that sits in my rack to stream through onast I actually have it connected to a tiny pilot KVM this lets me control that device from anywhere over the network this is pretty awesome since it requires no software on the client device and I can control the device even during boot to access the BIOS I also have a four port KVM that I can hook up Downstream and set hot keys to change the inputs effectively letting me use the tiny pilot on four separate devices as well I mentioned before that I have a land to VLAN for my omata setup and well here's my omata setup I used to run this as my main setup but as a YouTuber and someone with terrible impulse control I've changed my network quite a few times times over the years right now it exists as a test line and to keep up with what omata is doing with their updates last but not least is my Zab board cluster this is essentially a super slim down version of my main proxmox cluster since it's also running as a proxmox cluster I use this setup to test the waters to see if I wanted to dive into an ha setup and as you can tell I'm now in the deep end convincing myself it was the right choice while it isn't technically in my home I still consider my set up part of my home lab too I'm running a backup SL test k3s cluster with American Cloud I did a whole video showing how I set up everything but they've been adding features left and right so that might be dated now they aren't perfect but what I really like about them is how simplified everything is to get going coming from dabbling in AWS and other VPS services this is so much better I spun up a k3s cluster in like 5 minutes and was deploying a minute later and aside for my personal machines that's kind of it those aren't too exciting my main machine is a Windows 11 device and my M1 MacBook runs well Mac OS I like the diversity of using all three Windows Mac and Linux on a day-to-day basis and while none of them are perfect I still enjoy using them all well that does it I think that's everything I'm running today in my home lab I know some of it may have been high level but to make this video not requireed a Netflix minseries I had to glaze over some things also a lot of this stuff I have full videos on so check the video links in the description below and if I don't have one then comment on what you want to see do I think my setup is the best no but I do think it's solid and it works for me will this setup stay the way it is hell no the 2024 version of this video will probably be so much different that's all I have if you like the video then drop a like if you want to see more homelab stuff then subscribe cuz it's kind of what I do I want to give a huge shout out to my YouTube members and my patreons you guys are my super cool VLAN that is isolated but also has a few traffic rules for special reasons I I don't know where I'm going with that you guys are the best and if you're still watching you're cool too thank you so much and I'll see you in the next one [Music]"
    }
}