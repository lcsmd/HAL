<!DOCTYPE html>
<html>
<head>
    <title>Email Detail</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .card { background: white; padding: 20px; border-radius: 8px; max-width: 800px; }
        .header-field { margin-bottom: 10px; }
        .header-field strong { color: #64748b; }
    </style>
</head>
<body>
    <button onclick="history.back()">‚Üê Back</button>
    <div id="emailDetail">Loading...</div>
    
    <script>
        const emailId = '{{ email_id }}';
        
        async function loadEmail() {
            try {
                const response = await fetch(`/api/emails/${emailId}`);
                const email = await response.json();
                
                const container = document.getElementById('emailDetail');
                
                container.innerHTML = `
                    <div class="card">
                        <h1>${email.subject}</h1>
                        <div class="header-field"><strong>From:</strong> ${email.from}</div>
                        <div class="header-field"><strong>To:</strong> ${email.to.join(', ')}</div>
                        <div class="header-field"><strong>Date:</strong> ${email.date_sent}</div>
                        <hr>
                        <pre style="white-space: pre-wrap;">${email.body_content || 'No content available'}</pre>
                    </div>
                `;
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('emailDetail').innerHTML = '<p>Error loading email.</p>';
            }
        }
        
        loadEmail();
    </script>
</body>
</html>