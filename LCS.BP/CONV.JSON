      EQU KEY TO BUFF<1>, VAL TO BUFF<2>
      EQU NAME TO MSGBUFF<1>, DT TO MSGBUFF<2>, TM TO MSGBUFF<3>, EPOCH TO MSGBUFF<4>,  MSGTEXT TO MSGBUFF<5>, REF TO MSGBUFF<6>
      open "LCS.TXT" TO F.LCS.TXT ELSE PRINT "LCS.TXT";stop
      READ GBUFF FROM F.LCS.TXT,"G.JSON" ELSE PRINT "G.JSON";STOP
      OPEN "G" TO F.G ELSE PRINT "G";STOP
      EXECUTE "CLEAR-FILE DATA G"
      EXECUTE "CLEAR-FILE DATA MESSAGES"
      open "MESSAGES" TO F.MESSAGES ELSE PRINT "MESSAGES";STOP
      MSGBUFF = ""
      LINE.CT = DCOUNT(GBUFF,@FM)
      LAST.NAME = ""
      msg.ct = 0
      FOR CT = 1 TO LINE.CT
         LINE = GBUFF<CT>
         BUFF = CHANGE(LINE,":",@FM,1)
         BUFF = CHANGE(BUFF,'"','')
         ID = 100000+CT
         BUFF = TRIMS(BUFF)
         IF VAL THEN
            VAL = TRIM(VAL,",","B")
            VAL = TRIM(VAL)
            WRITE BUFF ON F.G,ID
         END
         *IF NOT(MOD(CT,100)) THEN PRINT CT
         IF CT > 2956 THEN GOSUB CHECK:
      NEXT CT
      PRINT CT:" RECORDS WRITTEM"
CHECK:
      IF KEY = "name" then
         IF (VAL AND VAL <> "< No Display Name Found >") THEN LAST.NAME = VAL
      END
      if key = "time" then
         dt = iconv(FIELD(VAL," ",1),"D")
         TM = FIELD(VAL," ",2)
         EPOCH = VAL
      END
      if key = "text" then
         REF = ID
         msg.ct += 1
         NAME=  LAST.NAME
         msgid = 1000000 + msg.ct
         msgtext = val
         write msgbuff on f.messages,msgid
         PRINT MSGID:":":CHANGE(MSGBUFF,@FM," ")
         MSGBUFF=""
      end
      return
      END
