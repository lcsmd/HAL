      DEfFUN GET.VIDID(YTURLINPUT)
      OPEN 'LCS.TXT' TO F.LCS ELSE PRINT 'LCS.TXT';STOP
      open "YT-JSON" to f.json else print "yt-json";stop
      open "YT-VIDEOS" to f.yt else print "YT-VIDEOS";stop
      open 'file.control' to f.file.control else print 'file.control';stop
      read f.rec from f.file.control,"YT-VIDEOS" ELSE
         f.rec = ""
         f.rec<3> = 100000
         f.rec<2> = "YTV"
      end
      ytv.lastid=f.rec<3>
      ytv.prefix=f.rec<2>
      s=@sentence
      vids=field(s," ",2)
      video.ct=0
      vids=change(vids,",",@fm)
      vct = dcount(vids,@fm)
      for vx = 1 to vct
         vid.id = vids<vx>
         gosub save.video:
      next vx
      print "Videos imported:":video.ct
      write f.rec on f.file.control,"YT-VIDEOS"
      STOP

save.video:
      vid.id = GET.VIDID(vid.id)
      if vid.id then
         sel = "select YT-VIDEOS with vid like ...":vid.id:"..."
         execute sel capturing cap
         *PRINT CAP
         if cap[1,1]="0" then
            cmd = "!python C:\scripts\get_youtube_info.py ":vid.id
            execute cmd capturing cap
            *print cap
            json.id = vid.id:".JSON"
            read json.data from f.json,json.id then
               json.document = jparse(json.data)
               json.document{'vid'}=vid.id
               ytv.lastid += 1
               print space(10):"saving video:":vid.id:"  ":json.document{'title'}
               ytvid = ytv.prefix:ytv.lastid
               write json.document on f.yt,ytvid
               print vid.id:" saved as ":ytvid:" in YT-VIDEOS"
               video.ct+=1
            end
         end else
            PRINT vid.id:" already exist. skipping"
         END
      end else
         print vid.id:" not valid"
      end
      return
      END
